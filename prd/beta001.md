🍅 番茄时间 · Mac Menu Bar App

最终需求文档（MVP Spec）

定位：
一个为个人使用设计的、允许“流氓式强提醒”的执行工具
核心目标：强制你在该休息的时候停下来

⸻

1. 产品原则（不可违背）

1. 当专注时间结束，系统状态必须切换，而不是询问用户意愿。
1. 推迟是一种违规行为，而不是正常操作。
1. 强提醒优先于“用户体验上的温柔”。
1. 不做复杂任务管理，不做分析报表。
1. 一切设计服务于“停止工作 → 去休息”。

⸻

2. 核心状态机

2.1 状态定义

状态 说明
Idle 未开始
Focus 正常番茄专注
Snooze 推迟专注（违规阶段）
Break 休息阶段

❗ Snooze 是 独立状态，不是 Focus 的一部分

⸻

2.2 状态流转

Idle
└─ Start → Focus
Focus
└─ TimeUp → 提醒 → Break / Snooze
Snooze
└─ TimeUp →（次数 < 3）→ 再 Snooze
└─ TimeUp →（次数 = 3）→ 强制 Break
Break
└─ TimeUp → Idle

⸻

3. Menu Bar 行为规范

3.1 实时倒计时显示（必须）
• Focus / Snooze / Break 阶段：
• Menu Bar 实时显示剩余时间（每秒刷新）
• Idle：
• 显示简短标识（如 🍅）

3.2 显示格式
• 时间格式固定：MM:SS
• 使用等宽数字，避免抖动
• 状态可一眼区分：

状态 示例
Focus 🍅 24:59
Snooze ⛔ +30m
Break ☕ 11:00
Idle 🍅

Snooze 显示 累计推迟时间（A 方案确认）

⸻

4. 提醒系统（强制）

4.1 提醒形式
• macOS 原生系统级弹窗（Panel / Alert）
• 非自绘窗口
• 覆盖当前工作窗口
• 不全屏、不锁输入

⸻

4.2 提醒触发点

触发事件 是否提醒
Focus 完成 ✅
Snooze 完成 ✅
Break 完成 ✅

⸻

5. 推迟（Snooze）机制（最终版）

5.1 基本规则

- 番茄专注结束后，允许推迟进入休息
- 每次推迟可选：5 / 10 / 15 分钟
- 无论选择哪种时长，均消耗 1 次推迟次数
- 每轮番茄最多允许推迟 3 次
- 推迟时间不计入番茄完成数

⸻

5.2 推迟强度递增规则

推迟次数 弹窗语气 行为
0 中性 可推迟
1 警告 可推迟
2 最后警告 明确“最后一次”
3 宣判 强制休息

⸻

5.3 弹窗交互设计

第 0 / 1 / 2 次

🍅 / ⚠️ / ⛔
本轮专注已结束

按钮：
• 开始休息 ⭐（默认）
• 推迟 5 分钟
• 推迟 10 分钟
• 推迟 15 分钟

第 2 次按钮文案需明确：最后一次推迟

⸻

第 3 次（无选择）

🚫 已达到最大推迟次数
系统已强制进入休息

    •	❌ 无推迟按钮
    •	❌ 无“继续工作”
    •	自动进入 Break

⸻

6. 休息时间计算规则（你已确认）

6.1 公式

总休息时间 = 5 分钟（基础） +（累计推迟分钟数 ÷ 5）

6.2 示例

推迟情况 累计推迟 休息时间
无推迟 0 5 分钟
1 × 10 分钟 10 7 分钟
5 + 15 20 9 分钟
15 + 15 + 15 45 14 分钟

❗ 这是行为后果可见化，非常重要

⸻

7. 休息阶段行为
   • 进入 Break 后：
   • Menu Bar 明确显示 ☕
   • 弹窗提示休息开始
   • 休息完成：
   • 系统级弹窗提醒
   • 不自动开始下一个番茄

⸻

8. 不做清单（MVP 明确排除）

- ❌ 任务管理
- ❌ 标签 / 项目
- ❌ 统计报表
- ❌ 云同步
- ❌ 网站 / App 封锁
- ❌ 成就系统

⸻

9. 技术边界（实现指导）
   • macOS 原生 App
   • Menu Bar 常驻
   • 所有提醒使用系统 API
   • 状态机驱动（严禁 if-else 堆逻辑）

⸻

10. MVP 完成标准（Definition of Done）

- 能在 Menu Bar 实时显示倒计时
- 番茄完成必定打断当前工作
- 推迟机制可用且强度递增
- 达到最大推迟次数后无法继续工作
- 休息时间随违规行为自动增加

⸻

最后一句评价（非常重要）

你这个设计 非常自洽，而且有一个很罕见的优点：

它不奖励自律，只惩罚不休息

这对真正的高强度工作者来说，是对的。

⸻
